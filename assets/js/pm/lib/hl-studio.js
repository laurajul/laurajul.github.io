const hlStudio=function(t){function e(t){for(var e=0,n=1779033703^t.length;e<t.length;e++)n=(n=Math.imul(n^t.charCodeAt(e),3432918353))<<13|n>>>19;return function(){return n=Math.imul(n^n>>>16,2246822507),n=Math.imul(n^n>>>13,3266489909),(n^=n>>>16)>>>0}}function n(t,e,n,a){return function(){var o=((t|=0)+(e|=0)|0)+(a|=0)|0;return a=a+1|0,t=e^e>>>9,e=(n|=0)+(n<<3)|0,n=(n=n<<21|n>>>11)+o|0,(o>>>0)/4294967296}}function a(t,e){null!=window.top&&window.top.postMessage({source:"hl-studio",eventName:t,data:e,metadata:{url:window.location.href,hl:JSON.parse(JSON.stringify(r)),timestamp:Date.now()}},"*")}function o(t){if(null==t)return;let e=null;"CANVAS"===t.tagName&&(e=t.toDataURL("image/png")),"IMG"===t.tagName&&(e=t.src),a("SCREENSHOT_CREATED",{imageData:e})}if(null==t)return;t.context.studioMode="1"===new URLSearchParams(window.location.search).get("hls"),t.context.isCurated="1"===new URLSearchParams(window.location.search).get("ic");const r={...t,randomSeed:t.context.isCurated?e(t.tx.hash):e(t.tx.hash+t.tx.tokenId)};let i=!1;return t.context=new Proxy(t.context,{get:(t,e)=>t[e]}),t.token=new Proxy(t.token,{get:(t,e)=>("capturePreview"===e&&i||("capturePreview"===e&&(i=!0),a("PROPERTY_GET",{parent:"token",prop:e})),t[e]),set:(t,e,n)=>(a("PROPERTY_SET",{parent:"token",prop:e,value:n}),t[e]=n)}),t.random=function(...t){let e=0,a=1;1===t.length&&(a=t[0]),2===t.length&&(a=t[1],e=t[0]);return e+(a-e)*n(r.randomSeed(),r.randomSeed(),r.randomSeed(),r.randomSeed())()},a("HLSTUDIO_INIT",{version:"0.0.2"}),window.addEventListener("message",(n=>{if("CAPTURE_PREVIEW"===n.data.eventName){const t=n.data.data.selector;o(document.querySelector(t))}if("HARVEST_TRAIT"===n.data.eventName){if(null==window.calculateHLTraits)return;const o=n.data.data.tx;r.randomSeed=r.context.isCurated?e(o.hash):e(o.hash+o.tokenId);const i={...t,tx:o};a("HLSTUDIO_HARVESTED_TRAIT",{traits:window.calculateHLTraits(i)})}})),{createScreenshot:o}}(hl);window.$hlStudio=hlStudio;